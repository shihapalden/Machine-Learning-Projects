# -*- coding: utf-8 -*-
"""Loan Approval Prediction using XGBClassifier

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1L1IyV6jRbczbkLzvWzW8B8BEfftlANx3
"""

import xgboost as xgb
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import LabelEncoder
from sklearn.metrics import accuracy_score, confusion_matrix, classification_report

data = pd.read_excel('loan_approval_data.xlsx')
Label_encoder = LabelEncoder()
data['credit_score'] = Label_encoder.fit_transform(data['credit_score'])
x = data[['salary', 'credit_score']]
y = data['approval']

X_train, X_test, Y_train,Y_test = train_test_split(x,y, test_size=0.2)

model = xgb.XGBClassifier()
model.fit(X_train,Y_train)

y_pred = model.predict(X_test)
accuracy = accuracy_score(Y_test, y_pred)
report = classification_report(Y_test, y_pred)
metrix = confusion_matrix(Y_test, y_pred)
print(accuracy)
print(report)
print(metrix)

# Example prediction
new_data = pd.DataFrame({'salary': [15000], 'credit_score': ['normal']})
new_data['credit_score'] = Label_encoder.transform(new_data['credit_score'])
prediction = model.predict(new_data)
print("Prediction for new data:", prediction)

import seaborn as sns
import matplotlib.pyplot as plt

sns.heatmap(metrix, annot=True, fmt='d', cmap='Blues', xticklabels=['Not Approved', 'Approved'], yticklabels=['Not Approved', 'Approved'])
plt.title("Confusion Matrix")
plt.xlabel("Predicted")
plt.ylabel("Actual")
plt.show()